# Http 的重定向 与 3XX状态码
1. 重定向操作是由于服务端返回码设置3xx之后，浏览器根据服务端提供的新地址自动执行跳转的过程。
2. 重定向除了有少量的性能损失之外，对用户基本是不可见的。
3. 重定向分为三种类型：
    1. 永久重定向
    2. 临时重定向
    3. 特殊重定向

### 永久重定向
这种重定向操作是永久性的。它表示原 URL 不应再被使用，而应该优先选用新的 URL。
**搜索引擎机器人会在遇到该状态码时触发更新操作，在其索引库中修改与该资源相关的 URL 。**

| 编码 | 含义 | 处理方法 | 典型应用场景 |
| --- | --- | --- | --- |
| 301 | Moved Permanently	 | GET 方法不会发生变更，其他方法有可能会变更为 GET 方法。 | 网站重构。|
| 308 | Permanent Redirect | 方法和消息主体都不发生变化。 | 网站重构，用于非GET方法。(with non-GET links/operations)  |

301 返回码在规范中无意使得方法变更，但在浏览器实现中往往会让其他方法处理成GET，因此重新设置了308来对不想做这样处理的方法保持原类型。（但浏览器支持不好）

### 临时重定向
有时候请求的资源无法从其标准地址访问，但是却可以从另外的地方访问。在这种情况下可以使用临时重定向。搜索引擎不会记录该新的、临时的链接。在创建、更新或者删除资源的时候，临时重定向也可以用于显示临时性的进度页面。

| 编码 | 含义 | 处理方法 | 典型应用场景 |
| --- | --- | --- | --- |
| 302 | Fonud | GET 方法不会发生变更，其他方法有可能会变更为 GET 方法。 | 由于不可预见的原因该页面暂不可用。在这种情况下，搜索引擎不会更新它们的链接。|
| 303 | See Other | GET 方法不会发生变更，其他方法会变更为 GET 方法（消息主体会丢失）。 | 用于PUT 或 POST 请求完成之后进行页面跳转来防止由于页面刷新导致的操作的重复触发。  |
| 307 | 	Temporary Redirect| 方法和消息主体都不发生变化。| 由于不可预见的原因该页面暂不可用。在这种情况下，搜索引擎不会更新它们的链接。当站点支持非 GET 方法的链接或操作的时候，该状态码优于 302 状态码。|

307 和 308 出现的理由是一样的

### 特殊重定向
304 通常用于指示浏览器继续使用缓存（缓存已过期，但是内容没有修改）
300 用的场景比较小，返回的内容中指明了可能的重定向地址，通过用户选中进行重定向

| 编码 | 含义 | 典型应用场景 |
| --- | --- | --- |
| 300 | Multiple Choice	 | 不会太多：所有的选项在消息主体的 HTML 页面中列出。|
| 304	| Not Modified |缓存刷新：该状态码表示缓存值依然有效，可以使用。|

### 其它方式设置重定向
1. html 中，其中第一个数字是说几秒后重定向，第二个参数是重定向位置
     ```html
    <head> 
    <meta http-equiv="refresh"      content="0;URL=http://www.example.com/" />
    </head> 
    ```
    
2. js

    ```
window.location = 'https://www.xxx.com'
```
1. 优先级
    1. http请求返回
    2. html meta设置
    3. js 设置的跳转

### 应用场景
1. 域名别称 302？
2. 保持链接有效。304？
3. 对于不安全请求的临时响应  303 (See Other) 
4. 对于耗时请求的临时响应 303 See Other
