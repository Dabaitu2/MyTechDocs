# é…ç½®ä¸€ä¸ªStory Book
## 1. StoryBookæ˜¯ç”¨äºå»ºç«‹design Systemçš„å¹³å°
Design System çš„ä»‹ç»è§[è¿™é‡Œ](https://zhuanlan.zhihu.com/p/31197706)
> 
å¯¹äºäº§å“ä¸­æ¯”è¾ƒæˆç†Ÿçš„é‚£äº›æ¨¡å—ï¼ˆæ¯”å¦‚ç¤¾åŒºçš„feedå¡ç‰‡æ ¼å¼ï¼‰ï¼Œç»Ÿä¸€è¿›è¡Œç»„ä»¶åŒ–ï¼Œè®¾è®¡å±‚é¢å’Œå¼€å‘å±‚é¢ç»Ÿä¸€å‘½åå…±äº«èµ„æºï¼Œåº”ç”¨åˆ°ä¸šåŠ¡çº¿çš„åç»­è¿­ä»£ã€‚è¿™éƒ¨åˆ†æˆç†Ÿæ¨¡å—å°±å¯ä»¥åœ¨äº§å“ä¸­è‡ªå¾ªç¯ï¼Œæ— éœ€è®¾è®¡å¸ˆåç»­ç»´æŠ¤äº†ã€‚
>
è€Œè®¾è®¡å¸ˆçš„äººå·¥ç²¾åŠ›è¢«è§£æ”¾å‡ºæ¥ï¼Œä¸»è¦ç”¨äºæ–°åŠŸèƒ½çš„å¼€å‘ï¼Œæ–°è„‘æ´çš„çˆ†ç‚¸ï¼Œå’Œäº§å“æ–¹å‘çš„æ¢ç´¢ã€‚

## 2. StoryBookçš„åŸºç¡€æ¦‚å¿µ
### 1. ä¸‰ç§APIæ ¼å¼
---
#### 1. CMF - Component Story Format ç»„ä»¶æ ¼å¼
```javascript
import React from 'react';
import { action } from '@storybook/addon-actions';
// å®é™…çš„ç»„ä»¶
import Button from './Button';

// å¯¼å‡ºçš„å¤§ç±»æ˜¯ä»€ä¹ˆç»„ä»¶ï¼Œåå­—åº”è¯¥æ˜¯å”¯ä¸€çš„
export default {
  component: Button,
  title: 'Button',
  // è¿˜æ”¯æŒdecoratorsï¼Œ parameters
  includeStories: ['text','emoji']
};

// ä¸Šé¢æŒ‡å®šäº†å¯¼å‡ºçš„storyï¼Œæ‰€ä»¥è¿™é‡Œä¸ä¼šè¢«é”™è¯¯å¯¼å‡º
export const someData = {foo: 1}

// ç»„ä»¶çš„å‡ ä¸ªä¾‹å­ï¼Œå¯¼å‡ºä½¿å¾—è¢«storybookè¯†åˆ«
export const text = () => <Button onClick={action('clicked')}>Hello Button</Button>;

text.story = {
    name: 'hahaha', // æ‰‹åŠ¨æŒ‡å®šnameï¼Œè¿™æ ·å±•ç¤ºçš„ç»„ä»¶åä¼šæˆä¸ºâ€˜hahahaâ€™ï¼Œ ä½†å¯¼å‡ºç»„ä»¶çš„æ ‡è¯†ç¬¦è¿˜æ˜¯åŸå…ˆçš„text
    decorators: [...],
    paramters: [...]
}

export const emoji = () => (
   // action addon ç”¨äºå±•ç¤ºå“åº”äº‹ä»¶
  <Button onClick={action('clicked')}>
    <span role="img" aria-label="so cool">
      ğŸ˜€ ğŸ˜ ğŸ‘ ğŸ’¯
    </span>
  </Button>
);
```

####2. Classic Stories API ç»å…¸æ ¼å¼ï¼Œ 5.2 ç‰ˆæœ¬åä¸å†å»ºè®®ä½¿ç”¨
```javascript
import React from 'react';
import { storiesOf } from '@storybook/react';
import { action } from '@storybook/addon-actions';
import Button from '../components/Button';

storiesOf('Button', module)
  .add('with text', () => <Button onClick={action('clicked')}>Hello Button</Button>)
  .add('with some emoji', () => (
    <Button onClick={action('clicked')}>
      <span role="img" aria-label="so cool">
        ğŸ˜€ ğŸ˜ ğŸ‘ ğŸ’¯
      </span>
    </Button>
  ));
```

####3. MDX syntax æ··åˆäº†markdownå’Œjsxçš„æ–°æ ¼å¼ï¼Œç›®å‰è¿˜æ²¡æœ‰æ–‡æ¡£
---
### 2. decoratorå’Œparameters
#### 1.decorator
decoratoræ˜¯ä¸€ç§ä½¿ç”¨ä¸€ç»„é€šç”¨ç»„ä»¶åŒ…è£…storyçš„æ–¹æ³•ï¼Œä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æƒ³ä»¥æŸç§æ ¼å¼åŒ…è£…storyï¼Œæˆ–ä¸ºstoryæä¾›ä¸€äº›contextã€‚
è£…é¥°å™¨å¯ä»¥å…¨å±€åº”ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨ç»„ä»¶çº§åˆ«åº”ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨æ•…äº‹çº§åˆ«å•ç‹¬åº”ç”¨ã€‚å…¨å±€è£…é¥°å™¨é€šå¸¸åº”ç”¨åœ¨Storybooké…ç½®æ–‡ä»¶ä¸­ï¼Œè€Œç»„ä»¶/æ•…äº‹è£…é¥°å™¨åˆ™åº”ç”¨åœ¨æ•…äº‹æ–‡ä»¶ä¸­ã€‚

**ä¸€ä¸ªè®©æ‰€æœ‰ç»„ä»¶éƒ½å±…ä¸­å±•ç¤ºçš„ä¾‹å­**
```javascript
import React from 'react';
import { addDecorator } from '@storybook/react';

addDecorator(storyFn => <div style={{ textAlign: 'center' }}>{storyFn()}</div>);
```

**ä¸€ä¸ªç»™å•ä¸ª/ç±»storyæ·»åŠ è£…é¥°å™¨çš„ä¾‹å­**
```javascript
import React from 'react';
import MyComponent from './MyComponent';

export default {
  title: 'MyComponent',
  decorators: [storyFn => <div style={{ backgroundColor: 'yellow' }}>{storyFn()}</div>],
};

export const normal = () => <MyComponent />;
export const special = () => <MyComponent text="The Boss" />;
special.story = {
  decorators: [storyFn => <div style={{ border: '5px solid red' }}>{storyFn()}</div>],
};
```

åœ¨storybook çš„æ’ä»¶ä¸­å¤§é‡ä½¿ç”¨äº†decoratorï¼ŒåŒæ—¶è¿˜å¯ä»¥ç”¨äºçŠ¶æ€ç®¡ç†ä¼ å€¼ï¼Œå…¨å±€ä¸»é¢˜ä¿®æ”¹ç­‰

#### 2. parameter
parameterçš„ä½¿ç”¨æ–¹å¼å¤§è‡´ä¸è£…é¥°å™¨æ— å¼‚ï¼Œä¸»è¦æ˜¯è®¾ç½®storyçš„æŸäº›ç‰¹æ®Šå±æ€§ï¼ˆä¸æ˜¯ç»„ä»¶çš„propsï¼‰ï¼Œæ¯”å¦‚ï¼Œç”¨addon-notesæ¥å±•ç°æŸä¸€ä¸ªç»„ä»¶çš„notesæ—¶ï¼Œ
```javascript
import Component from './Component';

export default {
  title: 'Component',
  parameters: {
    notes: 'some documentation here',
  },
};
```

å°±å¯ä»¥çœ‹åˆ°æ’ä»¶æ ä¸­çš„notesä¸­å‡ºç°äº†æ–‡æœ¬

### 3. åˆå§‹åŒ–é…ç½®
åŸºç¡€é…ç½®
```bash
npm init -y
npx -p @storybook/cli sb init --type react
# åœ¨CRAæƒ…å†µä¸‹ä¸º --type react_script
```
å…¶ä»–é…ç½®æŒ‰éœ€æŒ‰ç…§addonå®˜ç½‘æç¤ºçš„ä¸‹è½½å¹¶é…ç½®å³å¯
---
æœ€ååˆæ°´äº†ï¼Œå“ˆå“ˆï¼Œå®˜ç½‘è®²çš„å¾ˆè¯¦ç»†äº†ğŸ¤¦â€â™‚ï¸